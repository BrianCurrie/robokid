(()=>{"use strict";const e=(()=>{const e=document.getElementById("portrait-container");let t=[],n=[],i=[];const o=e=>{for(let t=0;t<9;t++)clearInterval(i[t]),i[t]=setInterval((()=>{l(t)}),e);console.log(`Bone tracking initialized with interval of ${e}`)},l=i=>{n[i].style.transform=getComputedStyle(t[i]).getPropertyValue("transform"),n[i].style.transformOrigin=getComputedStyle(t[i]).getPropertyValue("transformOrigin"),n[i].style.left=t[i].getBoundingClientRect().left-e.getBoundingClientRect().left,n[i].style.top=t[i].getBoundingClientRect().top-e.getBoundingClientRect().top};return t[0]=document.getElementById("bone-wheels"),t[1]=document.getElementById("bone-body-tube"),t[2]=document.getElementById("bone-chest"),t[3]=document.getElementById("bone-right-arm"),t[4]=document.getElementById("bone-right-hand"),t[5]=document.getElementById("bone-left-arm"),t[6]=document.getElementById("bone-left-hand"),t[7]=document.getElementById("bone-head"),t[8]=document.getElementById("bone-face"),n[0]=document.getElementById("img-wheels"),n[1]=document.getElementById("img-body-tube"),n[2]=document.getElementById("img-chest"),n[3]=document.getElementById("img-right-arm"),n[4]=document.getElementById("img-right-hand"),n[5]=document.getElementById("img-left-arm"),n[6]=document.getElementById("img-left-hand"),n[7]=document.getElementById("img-head"),n[8]=document.getElementById("img-face"),o(1e3/60),{initBoneTracking:o,enableAnimations:function(){t.forEach((e=>{e.classList.add("animated")}))},disableAnimations:function(){t.forEach((e=>{e.classList.remove("animated")}))}}})(),t=()=>{document.getElementById("settings-container").style.display=""},n=()=>{document.getElementById("settings-container").style.display="none"},i=t=>{switch(t){case 0:e.disableAnimations(),e.initBoneTracking(Number.MAX_SAFE_INTEGER);break;case 1:e.enableAnimations(),e.initBoneTracking(100);break;case 2:e.enableAnimations(),e.initBoneTracking(1e3/30);break;case 3:e.enableAnimations(),e.initBoneTracking(1)}document.getElementById("animation-settings-options").children[0].classList.remove("selected"),document.getElementById("animation-settings-options").children[1].classList.remove("selected"),document.getElementById("animation-settings-options").children[2].classList.remove("selected"),document.getElementById("animation-settings-options").children[3].classList.remove("selected"),document.getElementById("animation-settings-options").children[t].classList.add("selected")},o=e=>{switch(e){case 0:document.body.classList.remove("font-standard"),document.body.classList.remove("font-dyslexic"),document.body.classList.add("font-pixel");break;case 1:document.body.classList.remove("font-pixel"),document.body.classList.remove("font-dyslexic"),document.body.classList.add("font-standard");break;case 2:document.body.classList.remove("font-pixel"),document.body.classList.remove("font-standard"),document.body.classList.add("font-dyslexic")}document.getElementById("font-settings-options").children[0].classList.remove("selected"),document.getElementById("font-settings-options").children[1].classList.remove("selected"),document.getElementById("font-settings-options").children[2].classList.remove("selected"),document.getElementById("font-settings-options").children[e].classList.add("selected")},l=e=>{console.log("Dialogue speed set to "+e),document.getElementById("dialogue-settings-options").children[0].classList.remove("selected"),document.getElementById("dialogue-settings-options").children[1].classList.remove("selected"),document.getElementById("dialogue-settings-options").children[2].classList.remove("selected"),document.getElementById("dialogue-settings-options").children[3].classList.remove("selected"),document.getElementById("dialogue-settings-options").children[e].classList.add("selected")},d=function(){let e=null,t=0,n=0,i=1,o=null;function l(o){e.style.transform=`translate(${t}px, ${n}px) scaleX(${i})`,setTimeout((()=>{l()}),o)}function d(){switch(clearInterval(o),Math.round(2*Math.random())){case 0:break;case 1:i=Math.random()<.5?1:-1,o=setInterval((function(){return t<16?(t=16,void clearInterval(o)):t>624?(t=624,void clearInterval(o)):void(t+=i)}),15+10*Math.random());break;case 2:o=setInterval((function(){n>-16?n-=2:(clearInterval(o),o=setInterval((()=>{n<0?n+=2:clearInterval(o)}),1))}),1)}setTimeout((function(){d()}),500+1500*Math.random())}return{setElement:function(t){return e=t,this},commence:function(e){return t=Math.round(16+624*Math.random()),l(e),d(),this}}};function s(e,t,n,i,o,l){let d=0,s=!1;return{getId:function(){return e},generateHtml:function(){let i=document.createElement("div");i.classList.add("level-select-item"),i.id=`level-select-item-${e}`;let o=document.createElement("div");o.classList.add("level-select-item-title"),o.innerText=t;let l=document.createElement("div");return l.classList.add("level-select-item-topic"),l.innerText=n,i.appendChild(o),i.appendChild(l),s?i.classList.add("level-select-item-completed"):i.onclick=()=>{r.beginLevel(e)},i},begin:function(){document.getElementById("gameplay-container").innerHTML="",i.setLevel(this),document.getElementById("gameplay-container").appendChild(i.generateHtml()),r.setDialogue(l[d])},submit:function(t){s?console.log("This level is already complete."):t==o[d]?(d++,d>o.length-1?(console.log("Level finished."),s=!0,r.setDialogue(`Level ${e} complete, good job!`),r.finishLevel()):r.setDialogue(l[d]),r.setDialogue("Correct answer!",{duration:2e3})):r.setDialogue("Wrong answer!",{duration:2e3})}}}(()=>{let e=1e3/60,t=[];t.push((new d).setElement(document.getElementById("robokid")).commence(e)),t.push((new d).setElement(document.getElementById("kid1")).commence(e)),t.push((new d).setElement(document.getElementById("kid2")).commence(e)),t.push((new d).setElement(document.getElementById("kid3")).commence(e))})();const c=function(){let e=null;return{generateHtml:function(){const t=document.createElement("div");t.id="example-widget-container";const n=document.createElement("input");n.id="example-widget-input-field";const i=document.createElement("div");return i.id="example-widget-submit-button",i.innerText="Submit",i.onclick=()=>{!function(){const t=document.getElementById("example-widget-input-field").value;e.submit(t)}()},t.appendChild(n),t.appendChild(i),t},setLevel:function(t){e=t}}},a=function(){let e=null,t=(()=>{let e=[];for(let t=0;t<8;t++)e.push(0);return e})();function n(){document.getElementById("binary-widget-value-display").innerText=parseInt(t.join(""),2)}return{generateHtml:function(){const i=document.createElement("div");i.id="binary-widget-container";const o=document.createElement("div");o.id="binary-widget-value-display",o.innerText="0";const l=document.createElement("div");l.id="binary-widget-toggle-digits";const d=document.createElement("div");d.id="binary-widget-submit-button",d.innerText="Submit",d.onclick=()=>{!function(){const n=parseInt(t.join(""),2);e.submit(n)}()},i.appendChild(o),i.appendChild(l),i.appendChild(d);for(let e=0;e<8;e++){let i=document.createElement("div"),o=document.createElement("button"),d=document.createElement("div"),s=document.createElement("button");i.classList.add("digit-container"),d.classList.add("digit"),o.innerText="+",d.innerText="0",s.innerText="-",i.appendChild(o),i.appendChild(d),i.appendChild(s),l.appendChild(i),o.addEventListener("click",(()=>{"0"===d.innerText&&(t[e]=1,d.innerText="1",n())})),s.addEventListener("click",(()=>{"1"===d.innerText&&(t[e]=0,d.innerText="0",n())}))}return i},setLevel:function(t){e=t}}},m=function(){let e=null;return{generateHtml:function(){const t=document.createElement("div");t.id="convert-widget-container";const n=document.createElement("input");n.id="convert-widget-input",n.placeholder="Text to binary";const i=document.createElement("div");i.id="convert-widget-output";const o=document.createElement("div");return o.id="binary-widget-submit-button",o.innerText="Submit",o.onclick=()=>{!function(){const t=document.getElementById("convert-widget-input").value;console.log(t),e.submit(t)}()},t.appendChild(n),t.appendChild(i),t.appendChild(o),n.addEventListener("input",(()=>{const e=n.value;i.innerText=function(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(2)+" ";return t.trim()}(e)})),t},setLevel:function(t){e=t}}},r=(()=>{const e=e=>document.getElementById(e),t=(e("gameplay-container"),e("level-select-container")),n=e("level-select-items"),i=e("dialogue");let o=[],l="";function d(){n.innerHTML="",o.forEach((e=>{n.appendChild(e.generateHtml())}))}function r(){t.classList.remove("level-select-close-animation"),t.classList.add("level-select-open-animation")}return o=function(){let e=[];return e.push(new s(0,"Example Title","Example Topic",new c,["Apple","Bee","Cat"],['The first stage\'s dialogue. The answer is "Apple"','Second dialogue, answer is "Bee"','Third, "Cat"'])),e.push(new s(1,"Binary","Introduction to binary",new a,["1","5","198"],["Write 1 in binary","Write 5 in binary","Write 198 in binary"])),e.push(new s(2,"Binary conversion","Learn to convert to and from binary",new m,["a","A","Hello world!"],['What is "a" in binary?','What is "A" in binary?','What is "Hello world!" in binary?'])),e}(),d(),document.getElementById("level-select-open-button").onclick=function(){r()},r(),t.classList.remove("level-select-open-animation"),{beginLevel:function(e){o[e].begin(o[e]),t.classList.remove("level-select-open-animation"),t.classList.add("level-select-close-animation")},finishLevel:function(){d(),r()},setDialogue:function e(t,n){t||(t="< Dialogue message was not set >"),n||(n={}),n.duration?setTimeout((()=>{e(l)}),n.duration):l=t,i.innerText=t,console.log(`Set dialogue to "${t}"`)}}})();document.getElementById("open-settings-button").onclick=()=>{t()},document.getElementById("close-settings-button").onclick=()=>{n()};for(let e=0;e<4;e++)document.getElementById("animation-settings-options").children[e].onclick=()=>{i(e)};for(let e=0;e<3;e++)document.getElementById("font-settings-options").children[e].onclick=()=>{o(e)};for(let e=0;e<4;e++)document.getElementById("dialogue-settings-options").children[e].onclick=()=>{l(e)}})();