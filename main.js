(()=>{"use strict";const e=(()=>{const e=document.getElementById("dialogue");let t=[],n=null,i=null,o=!0,l=40,d=!1,s=1;function c(){null==i&&a(t[0],l)}function a(t,i,l=0){o?(0==l&&(e.innerText="",clearTimeout(n),n=null,r(t)),l<t.length&&(e.append(t[l++]),n=setTimeout((()=>{a(t,i,l)}),i))):(e.innerText=t,r(t))}function r(e){if(d){speechSynthesis.speaking&&speechSynthesis.cancel(),console.log("should speak");const t=new SpeechSynthesisUtterance;t.text=e,t.rate=s,t.pitch=2,speechSynthesis.speak(t)}}return e.onclick=()=>{t.length>1&&null==i&&(t=t.splice(1,t.length),c())},{enqueue:function(e){const n=0==t.length;"string"==typeof e&&t.push(e),Array.isArray(e)&&e.forEach((e=>{t.push(e)})),n&&c()},flashMessage:function(e,t){null!=i&&(clearTimeout(i),i=null),"string"==typeof e&&(a(e),i=setTimeout((()=>{i=null,c()}),t))},flushMessageQueue:function(){t=[],null==i&&a("",0,0)},enableTextCrawl:function(){o=!0},disableTextCrawl:function(){o=!1},enableSpeech:function(){d=!0},disableSpeech:function(){d=!1},setTextCrawlSpeed:function(e){l=e},setSpeechRate:function(e){s=e}}})();function t(t,n,i,o,l,s,c){let a=0,r=!1;return{getId:function(){return t},generateHtml:function(){let e=document.createElement("div");e.classList.add("level-select-item"),e.id=`level-select-item-${t}`;let o=document.createElement("div");o.classList.add("level-select-item-title"),o.innerText=n;let l=document.createElement("div");return l.classList.add("level-select-item-topic"),l.innerText=i,e.appendChild(o),e.appendChild(l),r?e.classList.add("level-select-item-completed"):e.onclick=()=>{d.beginLevel(t)},e},begin:function(){document.getElementById("gameplay-container").innerHTML="",o.setLevel(this),document.getElementById("gameplay-container").appendChild(o.generateHtml()),c&&("object"==typeof c?document.getElementById("level-info-content").appendChild(c):"string"==typeof c&&(document.getElementById("level-info-content").innerText=c)),e.flushMessageQueue(),e.enqueue(s[a])},submit:function(n){r?console.log("This level is already complete."):n==l[a]?(a++,a>l.length-1?(console.log("Level finished."),r=!0,e.flushMessageQueue(),e.flashMessage(`Level ${t} complete, good job!`),d.finishLevel()):(e.flushMessageQueue(),e.flashMessage("Correct answer!",2e3),e.enqueue(s[a]))):e.flashMessage("Wrong answer!",2e3)}}}const n=function(){let e=null,t=(()=>{let e=[];for(let t=0;t<8;t++)e.push(0);return e})();function n(){document.getElementById("binary-widget-value-display").innerText=parseInt(t.join(""),2)}return{generateHtml:function(){const i=document.createElement("div");i.id="binary-widget-container";const o=document.createElement("div");o.id="binary-widget-value-display",o.innerText=parseInt(t.join(""),2);const l=document.createElement("div");l.id="binary-widget-toggle-digits";const d=document.createElement("div");d.classList.add("submit-button"),d.innerText="Submit",d.onclick=()=>{!function(){const n=parseInt(t.join(""),2);e.submit(n)}()},i.appendChild(o),i.appendChild(l),i.appendChild(d);for(let e=0;e<8;e++){let i=document.createElement("div"),o=document.createElement("button"),d=document.createElement("div"),s=document.createElement("button");i.classList.add("digit-container"),d.classList.add("digit"),o.innerText="+",d.innerText=t[e],s.innerText="-",i.appendChild(o),i.appendChild(d),i.appendChild(s),l.appendChild(i),o.addEventListener("click",(()=>{"0"===d.innerText&&(t[e]=1,d.innerText="1",n())})),s.addEventListener("click",(()=>{"1"===d.innerText&&(t[e]=0,d.innerText="0",n())}))}return i},setLevel:function(t){e=t}}},i=function(){let e=null;function t(){const t=document.getElementById("convert-widget-input").value;document.getElementById("convert-widget-input").value="",document.getElementById("convert-widget-output").innerText="",e.submit(t)}return{generateHtml:function(){const e=document.createElement("div");e.id="convert-widget-container";const n=document.createElement("input");n.id="convert-widget-input",n.placeholder="Text to binary";const i=document.createElement("div");i.id="convert-widget-output";const o=document.createElement("div");return o.classList.add("submit-button"),o.innerText="Submit",o.onclick=()=>{t()},e.appendChild(n),e.appendChild(i),e.appendChild(o),n.addEventListener("input",(()=>{const e=n.value;i.innerText=function(e){let t="";for(let n=0;n<e.length;n++){let i=e.charCodeAt(n).toString(2);if(i.length<8)for(let e=i.length;e<8;e++)i="0"+i;t+=i+" "}return t.trim()}(e)})),n.addEventListener("keypress",(e=>{"Enter"===e.key&&t()})),e},setLevel:function(t){e=t}}},o=function(){let e=null,t=[0,0,0];return{generateHtml:function(){const n=document.createElement("div");n.id="RGB-widget-container";const i=document.createElement("div");i.id="RGB-widget-color-display",i.style.backgroundColor=`rgb(${t[0]}, ${t[1]}, ${t[2]})`;const o=document.createElement("div");o.id="RGB-widget-slider-container";const l=document.createElement("div"),d=document.createElement("div");d.innerText=`Red ${t[0]}`;const s=document.createElement("input");s.id="RGB-widget-red-input",s.classList.add("slider"),s.type="range",s.min="0",s.max="255",s.value=t[0];const c=document.createElement("div"),a=document.createElement("div");a.innerText=`Green ${t[1]}`;const r=document.createElement("input");r.id="RGB-widget-green-input",r.classList.add("slider"),r.type="range",r.min="0",r.max="255",r.value=t[1];const u=document.createElement("div"),m=document.createElement("div");m.innerText=`Blue ${t[2]}`;const p=document.createElement("input");p.id="GB-widget-blue-input",p.classList.add("slider"),p.type="range",p.min="0",p.max="255",p.value=t[2];const g=document.createElement("div");return g.classList.add("submit-button"),g.innerText="Submit",g.onclick=()=>{!function(){const n=`${t[0]}, ${t[1]}, ${t[2]}`;e.submit(n)}()},l.appendChild(d),l.appendChild(s),c.appendChild(a),c.appendChild(r),u.appendChild(m),u.appendChild(p),o.appendChild(l),o.appendChild(c),o.appendChild(u),n.appendChild(i),n.appendChild(o),n.appendChild(g),s.addEventListener("input",(()=>{t[0]=parseInt(s.value),d.innerText=`Red ${t[0]}`,i.style.backgroundColor=`rgb(${t[0]}, ${t[1]}, ${t[2]})`})),r.addEventListener("input",(()=>{t[1]=parseInt(r.value),a.innerText=`Green ${t[1]}`,i.style.backgroundColor=`rgb(${t[0]}, ${t[1]}, ${t[2]})`})),p.addEventListener("input",(()=>{t[2]=parseInt(p.value),m.innerText=`Blue ${t[2]}`,i.style.backgroundColor=`rgb(${t[0]}, ${t[1]}, ${t[2]})`})),n},setLevel:function(t){e=t}}},l=function(){let e=null;function t(e){const l=document.getElementById("cmd-widget-dir-text"),c=document.getElementById("cmd-widget-output");if(void 0===e||"~"===e)return d=n,s=["~"],void(l.innerHTML=`<span class="green">${i}@${o}</span>:<span class="blue">${s.join("")}</span>$`);if(".."!==e){if(!1===d.contents.hasOwnProperty(e)){let t=document.createElement("div");return t.innerText=`The folder "${e}" does not exist`,t.classList.add("errMsg"),c.prepend(t),-1}if("folder"!=d.contents[e].type){let t=document.createElement("div");return t.innerText=`"${e}" is a ${d.contents[e].type}, not a folder`,t.classList.add("errMsg"),c.prepend(t),-1}d=d.contents[e],s.push(`/${e}`),l.innerHTML=`<span class="green">${i}@${o}</span>:<span class="blue">${s.join("")}</span>$`}else{if(s.length>1){let e="root";s.pop();for(let t=1;t<s.length;t++)e+=`.contents.${s[t].substring(1)}`;t();for(let n=2;n<e.split(".").length;n+=2)t(e.split(".")[n])}else d=n;l.innerHTML=`<span class="green">${i}@${o}</span>:<span class="blue">${s.join("")}</span>$`}}let n={type:"root",contents:{Desktop:{type:"folder",contents:{Projects:{type:"folder",contents:{"roboKid.js":{type:"file",content:{}},"roboKid.html":{type:"file",content:{}},"roboKid.css":{type:"file",content:{}},".gitignore":{type:"file",content:{}}}}}},Downloads:{type:"folder",contents:{"introduction_to_web_development.txt":{type:"file",content:{}},"theOdinProjectSecrets.exe":{type:"file",content:{}}}},Documents:{type:"folder",contents:{node_modules:{type:"folder",content:{oneMillionFiles:{type:"file",content:{}}}}}},Videos:{type:"folder",contents:{"cs50_lecture1.mp4":{type:"file",content:{}},"react_tutorial.mp4":{type:"file",content:{}}}},Music:{type:"folder",contents:{"DOOMSoundtrack.mp3":{type:"file",content:{}},"KommSusserTod.mp3":{type:"file",content:{}},"NightcoreMix583WeebEdition.mp3":{type:"file",content:{}}}},Pictures:{type:"folder",contents:{"DoILookLikeIKnowWhatAJpgIs.jpg":{type:"file",content:{}},"HomeworkCheatsheet.png":{type:"file",content:{}},PicturesOfFriends:{type:"folder",content:{}}}}}};const i="robokid",o="systemName";let l,d=n,s=["~"],c=!1,a=["-1","-1","-1","-1","-1","-1"];function r(){let e=document.getElementById("cmd-widget-dir-caret");null!=e?"visible"===e.style.visibility?e.style.visibility="hidden":e.style.visibility="visible":clearInterval(l)}function u(e){let t=document.getElementById("cmd-widget-dir-caret"),n=document.getElementById("cmd-widget-dir-input");if(null!=t&&null!=n){switch(e){case 8:n.value=n.value.slice(0,-1);break;default:n.value=n.value+String.fromCharCode(e)}clearInterval(l),t.style.visibility="visible",m(n),l=setInterval(r,750)}}function m(e){let t=document.createElement("canvas").getContext("2d");t.font="16px Ubuntu";let n=Math.ceil(t.measureText(e.value).width)+5;e.style.width=`${n}px`}function p(t){e.submit(t)}return{generateHtml:function(){const e=document.createElement("div");e.id="cmd-widget-container";const n=document.createElement("div");n.id="cmd-widget-display";const g=document.createElement("div");g.id="cmd-widget-output";const h=document.createElement("div");h.id="cmd-widget-dir";const f=document.createElement("div");f.id="cmd-widget-dir-text";const y=document.createElement("input");y.id="cmd-widget-dir-input";const v=document.createElement("div");return v.id="cmd-widget-dir-caret",h.appendChild(f),h.appendChild(y),h.appendChild(v),n.appendChild(g),n.appendChild(h),e.appendChild(n),f.innerHTML=`<span class="green">${i}@${o}</span>:<span class="blue">${s.join("")}</span>$`,clearInterval(l),l=setInterval(r,750),c||(window.addEventListener("keypress",(function(e){u(e.keyCode)})),window.addEventListener("keydown",(function(e){switch(e.keyCode){case 8:u(e.keyCode)}})),window.addEventListener("keydown",(function(e){let n=document.getElementById("cmd-widget-dir-text"),o=document.getElementById("cmd-widget-dir-input"),l=document.getElementById("cmd-widget-output");if(13===e.keyCode){let e=document.createElement("div");if(e.innerHTML=`${n.innerHTML} ${o.value.trim()}`,l.prepend(e),"ls"===o.value.trim())"done"!=a[0]&&(a[0]="done",p(a[0])),function(e){if(!Array.isArray(e))return-1;if(0===e.length)return-1;const t=document.createElement("div"),n=document.getElementById("cmd-widget-output");for(let n of e){let e=document.createElement("span");e.innerText=n[0]+" ","folder"===n[1]&&e.classList.add("folder"),t.appendChild(e)}n.prepend(t)}(function(e){let t=[];for(let n in e.contents)t.push([n,e.contents[n].type]);return t}(d));else if(o.value.trim().split(" ").includes("cd")&&o.value.trim().split(" ").length<=2)if("done"===a[0]&&"done"===a[1]&&"done"!==a[2])if("cd Desktop"===o.value.trim())a[2]="done",p(a[2]),t(o.value.trim().split(" ")[1]);else{let e=document.createElement("div");e.innerText='Try typing "cd Desktop"',e.classList.add("errMsg"),l.prepend(e)}else if("done"===a[0]&&"done"===a[1]&&"done"===a[2]&&"done"!==a[3])if("cd"===o.value.trim())a[3]="done",p(a[3]),t(o.value.trim().split(" ")[1]);else{let e=document.createElement("div");e.innerText='Try typing "cd"',e.classList.add("errMsg"),l.prepend(e)}else if("done"===a[0]&&"done"===a[1]&&"done"===a[2]&&"done"===a[3])t(o.value.trim().split(" ")[1]);else{let e=document.createElement("div");e.innerText="Finish all the tasks before entering free mode",e.classList.add("errMsg"),l.prepend(e)}else if("clear"===o.value.trim())"done"===a[0]&&"done"!==a[1]&&(a[1]="done",p(a[1])),l.innerHTML="";else if("rm -rf /"===o.value.trim()||":(){:|:&};:"===o.value.trim()){let e=document.createElement("div");e.innerText="Calm down there Satan.",e.classList.add("errMsg"),l.prepend(e)}else if("pwd"===o.value.trim())"done"===a[0]&&"done"===a[1]&&"done"===a[2]&&"done"===a[3]&&"done"!==a[4]&&(a[4]="done",p(a[4])),function(){let e=document.createElement("div"),t=document.getElementById("cmd-widget-output");e.innerText=`/home/${i}${s.slice(1,s.length).join("")}`,e.classList.add("dir"),t.prepend(e)}();else if("finish"===o.value.trim())if("done"===a[0]&&"done"===a[1]&&"done"===a[2]&&"done"===a[3]&&"done"===a[4])a[5]="done",p(a[5]);else{let e=document.createElement("div");e.innerText="Complete all tasks first!",e.classList.add("errMsg"),l.prepend(e)}else{let e=document.createElement("div");e.innerText=`${o.value.trim()}: command not found`,e.classList.add("errMsg"),l.prepend(e)}o.value="",m(o)}})),c=!0),e},setLevel:function(t){e=t}}},d=(()=>{const d=e=>document.getElementById(e),s=(d("gameplay-container"),d("level-select-container")),c=d("level-select-items"),a=d("level-info-container");let r=[];function u(){c.innerHTML="",r.forEach((e=>{c.appendChild(e.generateHtml())}))}function m(){s.className="",s.classList.add("level-select-open-animation"),a.className="",a.classList.add("level-info-hide-animation"),e.flushMessageQueue(),e.enqueue("Select a level to play.")}return r=function(){let e=[];return e.push(new t(0,"Binary","How do computers think?",new n,["1","5","255","81","198","234"],["Set 1 in binary","Set 5 in binary","Set 255 in binary","Set 81 in binary","Set 198 in binary","Continue to experiement, or set 234 in binary and click submit to end this level."],'Every computer thinks in 1s and 0s, also known as binary.\n\n            Binary can be used to represent the decimal numbers which we use everyday!\n            \n            This level provides a tool that has eight "bits" which you can toggle on(1) or off(0) by pressing plus or minus buttons.\n\n            The ranges of numbers you can represent with 8 bits is 0-255.\n            ')),e.push(new t(1,"Binary conversion","How do computers understand English?",new i,["a","z","123","Hello world!","finish"],['What is "a" in binary?','What is "z" in binary?','What is "123" in binary?','What is "Hello world!" in binary?','Type whatever you want to see how the computer reads it, or type "finish" and click submit to end the level.'],"If computers can only think in binary how can they understand what we type in English?\n            \n            Computer scientists came up with a clever way to solve this problem.\n\n            They created a system where they could represent letters and characters as numbers. These numbers could then be converted into binary so the computer can understand what we are saying!\n            ")),e.push(new t(2,"Colors","How do computers see color?",new o,["255, 0, 0","0, 255, 0","0, 255, 255","255, 255, 255","0, 0, 0"],["Make red (R:255 G:0 B:0)","Make green (R:0 G:255 B:0)","Make cyan (R:0 G:255 B:255)","Set every slider to 255, what color do we get?","Continue to experiment with making new colors, or set every slider to 0 and click submit to finish this level."],"One of the most common ways to represent color to a computer is by using RGB, which stands for Red Green Blue.\n\n            RGB consists of three numbers, each one ranging from 0-255. These numbers determine how much of each color we add to the mix to get a final output color.\n\n            Bonus: Isn't it interesting that each color in RGB is represented by a number from 0-255? That's because 0-255 is the range of numbers we can represent with 8 binary bits!\n            ")),e.push(new t(3,"Command line","How do you navigate a computer without a mouse?",new l,["done","done","done","done","done","done"],['The command "ls" will show you folders and files, try it out!','The command "clear" will wipe the display. Give it a try.','The command "cd" is used to move between folders. Try typing the command "cd Desktop"','Typing "cd" without a target folder will send you to the home folder. Try it now!','View the current directory you\'re in by typing the command "pwd"','You are now in free mode! Explore this system to find secrets, or type "finish" to complete this level.'],"The command line is a user interface for navigating a computers folders and files.\n\n            This level has a handful of commands to get you comfortable working with the command line.\n\n            Commands:\n                ls - display folders and files\n                clear - clear display\n                cd - go to home folder\n                cd .. - go up a folder\n                cd [folderName] - open a folder\n                pwd - display current directory\n            ")),e}(),u(),document.getElementById("level-select-open-button").onclick=function(){m()},document.getElementById("level-info-open-button").onclick=function(){a.className="",a.classList.add("level-info-open-animation"),s.className="",s.classList.add("level-select-hide-animation")},document.getElementById("level-info-return-button").onclick=function(){a.className="",a.classList.add("level-info-close-animation"),s.className="",s.classList.add("level-select-reveal-animation")},m(),s.classList.remove("level-select-open-animation"),{beginLevel:function(e){r[e].begin(r[e]),s.className="",s.classList.add("level-select-close-animation"),a.className="",a.classList.add("level-info-reveal-animation")},finishLevel:function(){u(),m()},setDialogue:function(t,n){e.setDialogue(t,n)}}})(),s=(()=>{const e=document.getElementById("portrait-container");let t=[],n=[],i=[];const o=e=>{for(let t=0;t<9;t++)clearInterval(i[t]),i[t]=setInterval((()=>{l(t)}),e);console.log(`Bone tracking initialized with interval of ${e}`)},l=i=>{n[i].style.transform=getComputedStyle(t[i]).getPropertyValue("transform"),n[i].style.transformOrigin=getComputedStyle(t[i]).getPropertyValue("transformOrigin"),n[i].style.left=t[i].getBoundingClientRect().left-e.getBoundingClientRect().left,n[i].style.top=t[i].getBoundingClientRect().top-e.getBoundingClientRect().top};return t[0]=document.getElementById("bone-wheels"),t[1]=document.getElementById("bone-body-tube"),t[2]=document.getElementById("bone-chest"),t[3]=document.getElementById("bone-right-arm"),t[4]=document.getElementById("bone-right-hand"),t[5]=document.getElementById("bone-left-arm"),t[6]=document.getElementById("bone-left-hand"),t[7]=document.getElementById("bone-head"),t[8]=document.getElementById("bone-face"),n[0]=document.getElementById("img-wheels"),n[1]=document.getElementById("img-body-tube"),n[2]=document.getElementById("img-chest"),n[3]=document.getElementById("img-right-arm"),n[4]=document.getElementById("img-right-hand"),n[5]=document.getElementById("img-left-arm"),n[6]=document.getElementById("img-left-hand"),n[7]=document.getElementById("img-head"),n[8]=document.getElementById("img-face"),o(1e3/60),{initBoneTracking:o,enableAnimations:function(){t.forEach((e=>{e.classList.add("animated")}))},disableAnimations:function(){t.forEach((e=>{e.classList.remove("animated")}))}}})();function c(e){let t=0,n=0,i=1,o=null;function l(o){e.style.transform=`translate(${t}px, ${n}px) scaleX(${i})`,setTimeout((()=>{l()}),o)}function d(){switch(clearInterval(o),Math.round(2*Math.random())){case 0:break;case 1:i=Math.random()<.5?1:-1,o=setInterval((function(){return t<16?(t=16,void clearInterval(o)):t>624?(t=624,void clearInterval(o)):void(t+=i)}),15+10*Math.random());break;case 2:o=setInterval((function(){n>-16?n-=2:(clearInterval(o),o=setInterval((()=>{n<0?n+=2:clearInterval(o)}),1))}),1)}setTimeout((function(){d()}),500+1500*Math.random())}return{commence:function(e){t=Math.round(16+624*Math.random()),l(e),d()}}}(()=>{let e=[];e.push(new c(document.getElementById("robokid"))),e.push(new c(document.getElementById("kid1"))),e.push(new c(document.getElementById("kid2"))),e.push(new c(document.getElementById("kid3"))),e.forEach((e=>{e.commence(1e3/60)}))})(),(()=>{const t="animation-settings-options",n="font-settings-options",i="dialogue-settings-options",o="speech-settings-options";function l(e){switch(e){case 0:s.disableAnimations(),s.initBoneTracking(Number.MAX_SAFE_INTEGER);break;case 1:s.enableAnimations(),s.initBoneTracking(100);break;case 2:s.enableAnimations(),s.initBoneTracking(1e3/30);break;case 3:s.enableAnimations(),s.initBoneTracking(1)}Array.from(document.getElementById(t).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(t).children[e].classList.add("selected")}function d(e){switch(e){case 0:document.body.classList.remove("font-standard"),document.body.classList.remove("font-dyslexic"),document.body.classList.add("font-pixel");break;case 1:document.body.classList.remove("font-pixel"),document.body.classList.remove("font-dyslexic"),document.body.classList.add("font-standard");break;case 2:document.body.classList.remove("font-pixel"),document.body.classList.remove("font-standard"),document.body.classList.add("font-dyslexic")}Array.from(document.getElementById(n).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(n).children[e].classList.add("selected")}function c(t){switch(t){case 0:e.disableTextCrawl();break;case 1:e.enableTextCrawl(),e.setTextCrawlSpeed(80);break;case 2:e.enableTextCrawl(),e.setTextCrawlSpeed(40);break;case 3:e.enableTextCrawl(),e.setTextCrawlSpeed(30)}Array.from(document.getElementById(i).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(i).children[t].classList.add("selected")}function a(t){switch(t){case 0:e.disableSpeech();break;case 1:e.enableSpeech(),e.setSpeechRate(.5);break;case 2:e.enableSpeech(),e.setSpeechRate(1);break;case 3:e.enableSpeech(),e.setSpeechRate(1.5)}Array.from(document.getElementById(o).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(o).children[t].classList.add("selected")}!function(){const e=e=>document.getElementById(e);e("open-settings-button").onclick=()=>{document.getElementById("settings-container").style.display=""},e("close-settings-button").onclick=()=>{document.getElementById("settings-container").style.display="none"};for(let n=0;n<4;n++)e(t).children[n].onclick=()=>{l(n)};for(let t=0;t<3;t++)e(n).children[t].onclick=()=>{d(t)};for(let t=0;t<4;t++)e(i).children[t].onclick=()=>{c(t)};for(let t=0;t<4;t++)e(o).children[t].onclick=()=>{a(t)}}()})()})();