(()=>{"use strict";function e(e,t,n,o,l,a,c){let d=0,s=!1;return{getId:function(){return e},generateHtml:function(){let o=document.createElement("div");o.classList.add("level-select-item"),o.id=`level-select-item-${e}`;let l=document.createElement("div");l.classList.add("level-select-item-title"),l.innerText=t;let a=document.createElement("div");return a.classList.add("level-select-item-topic"),a.innerText=n,o.appendChild(l),o.appendChild(a),s?o.classList.add("level-select-item-completed"):o.onclick=()=>{i.beginLevel(e)},o},begin:function(){document.getElementById("gameplay-container").innerHTML="",o.setLevel(this),document.getElementById("gameplay-container").appendChild(o.generateHtml()),c&&("object"==typeof c?document.getElementById("level-info-content").appendChild(c):"string"==typeof c&&(document.getElementById("level-info-content").innerText=c)),i.setDialogue(a[d])},submit:function(t){s?console.log("This level is already complete."):t==l[d]?(d++,d>l.length-1?(console.log("Level finished."),s=!0,i.setDialogue(`Level ${e} complete, good job!`),i.finishLevel()):i.setDialogue(a[d]),i.setDialogue("Correct answer!",{duration:2e3})):i.setDialogue("Wrong answer!",{duration:2e3})}}}const t=function(){let e=null,t=(()=>{let e=[];for(let t=0;t<8;t++)e.push(0);return e})();function n(){document.getElementById("binary-widget-value-display").innerText=parseInt(t.join(""),2)}return{generateHtml:function(){const i=document.createElement("div");i.id="binary-widget-container";const o=document.createElement("div");o.id="binary-widget-value-display",o.innerText=parseInt(t.join(""),2);const l=document.createElement("div");l.id="binary-widget-toggle-digits";const a=document.createElement("div");a.id="binary-widget-submit-button",a.innerText="Submit",a.onclick=()=>{!function(){const n=parseInt(t.join(""),2);e.submit(n)}()},i.appendChild(o),i.appendChild(l),i.appendChild(a);for(let e=0;e<8;e++){let i=document.createElement("div"),o=document.createElement("button"),a=document.createElement("div"),c=document.createElement("button");i.classList.add("digit-container"),a.classList.add("digit"),o.innerText="+",a.innerText=t[e],c.innerText="-",i.appendChild(o),i.appendChild(a),i.appendChild(c),l.appendChild(i),o.addEventListener("click",(()=>{"0"===a.innerText&&(t[e]=1,a.innerText="1",n())})),c.addEventListener("click",(()=>{"1"===a.innerText&&(t[e]=0,a.innerText="0",n())}))}return i},setLevel:function(t){e=t}}},n=function(){let e=null;return{generateHtml:function(){const t=document.createElement("div");t.id="convert-widget-container";const n=document.createElement("input");n.id="convert-widget-input",n.placeholder="Text to binary";const i=document.createElement("div");i.id="convert-widget-output";const o=document.createElement("div");return o.id="binary-widget-submit-button",o.innerText="Submit",o.onclick=()=>{!function(){const t=document.getElementById("convert-widget-input").value;console.log(t),e.submit(t)}()},t.appendChild(n),t.appendChild(i),t.appendChild(o),n.addEventListener("input",(()=>{const e=n.value;i.innerText=function(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(2)+" ";return t.trim()}(e)})),t},setLevel:function(t){e=t}}},i=(()=>{const i=e=>document.getElementById(e),o=(i("gameplay-container"),i("level-select-container")),l=i("level-select-items"),a=i("level-info-container"),c=i("dialogue");let d=[],s="";function r(){l.innerHTML="",d.forEach((e=>{l.appendChild(e.generateHtml())}))}function m(){o.className="",o.classList.add("level-select-open-animation"),a.className="",a.classList.add("level-info-hide-animation")}return d=function(){let i=[];return i.push(new e(0,"Binary","Introduction to binary",new t,["1","5","198"],["Write 1 in binary","Write 5 in binary","Write 198 in binary"],"LEVEL INFO GOES HERE, IT CAN BE AN HTML ELEMENT OBJECT TOO")),i.push(new e(1,"Binary conversion","Learn to convert to and from binary",new n,["a","A","Hello world!"],['What is "a" in binary?','What is "A" in binary?','What is "Hello world!" in binary?'],"LEVEL INFO GOES HERE, IT CAN BE AN HTML ELEMENT OBJECT TOO")),i}(),r(),document.getElementById("level-select-open-button").onclick=function(){m()},document.getElementById("level-info-open-button").onclick=function(){a.className="",a.classList.add("level-info-open-animation"),o.className="",o.classList.add("level-select-hide-animation")},document.getElementById("level-info-return-button").onclick=function(){a.className="",a.classList.add("level-info-close-animation"),o.className="",o.classList.add("level-select-reveal-animation")},m(),o.classList.remove("level-select-open-animation"),{beginLevel:function(e){d[e].begin(d[e]),o.className="",o.classList.add("level-select-close-animation"),a.className="",a.classList.add("level-info-reveal-animation")},finishLevel:function(){r(),m()},setDialogue:function e(t,n){t||(t="< Dialogue message was not set >"),n||(n={}),n.duration?setTimeout((()=>{e(s)}),n.duration):s=t,c.innerText=t,console.log(`Set dialogue to "${t}"`)}}})(),o=(()=>{const e=document.getElementById("portrait-container");let t=[],n=[],i=[];const o=e=>{for(let t=0;t<9;t++)clearInterval(i[t]),i[t]=setInterval((()=>{l(t)}),e);console.log(`Bone tracking initialized with interval of ${e}`)},l=i=>{n[i].style.transform=getComputedStyle(t[i]).getPropertyValue("transform"),n[i].style.transformOrigin=getComputedStyle(t[i]).getPropertyValue("transformOrigin"),n[i].style.left=t[i].getBoundingClientRect().left-e.getBoundingClientRect().left,n[i].style.top=t[i].getBoundingClientRect().top-e.getBoundingClientRect().top};return t[0]=document.getElementById("bone-wheels"),t[1]=document.getElementById("bone-body-tube"),t[2]=document.getElementById("bone-chest"),t[3]=document.getElementById("bone-right-arm"),t[4]=document.getElementById("bone-right-hand"),t[5]=document.getElementById("bone-left-arm"),t[6]=document.getElementById("bone-left-hand"),t[7]=document.getElementById("bone-head"),t[8]=document.getElementById("bone-face"),n[0]=document.getElementById("img-wheels"),n[1]=document.getElementById("img-body-tube"),n[2]=document.getElementById("img-chest"),n[3]=document.getElementById("img-right-arm"),n[4]=document.getElementById("img-right-hand"),n[5]=document.getElementById("img-left-arm"),n[6]=document.getElementById("img-left-hand"),n[7]=document.getElementById("img-head"),n[8]=document.getElementById("img-face"),o(1e3/60),{initBoneTracking:o,enableAnimations:function(){t.forEach((e=>{e.classList.add("animated")}))},disableAnimations:function(){t.forEach((e=>{e.classList.remove("animated")}))}}})();function l(e){let t=0,n=0,i=1,o=null;function l(o){e.style.transform=`translate(${t}px, ${n}px) scaleX(${i})`,setTimeout((()=>{l()}),o)}function a(){switch(clearInterval(o),Math.round(2*Math.random())){case 0:break;case 1:i=Math.random()<.5?1:-1,o=setInterval((function(){return t<16?(t=16,void clearInterval(o)):t>624?(t=624,void clearInterval(o)):void(t+=i)}),15+10*Math.random());break;case 2:o=setInterval((function(){n>-16?n-=2:(clearInterval(o),o=setInterval((()=>{n<0?n+=2:clearInterval(o)}),1))}),1)}setTimeout((function(){a()}),500+1500*Math.random())}return{commence:function(e){t=Math.round(16+624*Math.random()),l(e),a()}}}(()=>{let e=[];e.push(new l(document.getElementById("robokid"))),e.push(new l(document.getElementById("kid1"))),e.push(new l(document.getElementById("kid2"))),e.push(new l(document.getElementById("kid3"))),e.forEach((e=>{e.commence(1e3/60)}))})(),(()=>{const e="animation-settings-options",t="font-settings-options",n="dialogue-settings-options",i=t=>{switch(t){case 0:o.disableAnimations(),o.initBoneTracking(Number.MAX_SAFE_INTEGER);break;case 1:o.enableAnimations(),o.initBoneTracking(100);break;case 2:o.enableAnimations(),o.initBoneTracking(1e3/30);break;case 3:o.enableAnimations(),o.initBoneTracking(1)}Array.from(document.getElementById(e).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(e).children[t].classList.add("selected")},l=e=>{switch(e){case 0:document.body.classList.remove("font-standard"),document.body.classList.remove("font-dyslexic"),document.body.classList.add("font-pixel");break;case 1:document.body.classList.remove("font-pixel"),document.body.classList.remove("font-dyslexic"),document.body.classList.add("font-standard");break;case 2:document.body.classList.remove("font-pixel"),document.body.classList.remove("font-standard"),document.body.classList.add("font-dyslexic")}Array.from(document.getElementById(t).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(t).children[e].classList.add("selected")};!function(){const o=e=>document.getElementById(e);o("open-settings-button").onclick=()=>{document.getElementById("settings-container").style.display=""},o("close-settings-button").onclick=()=>{document.getElementById("settings-container").style.display="none"};for(let t=0;t<4;t++)o(e).children[t].onclick=()=>{i(t)};for(let e=0;e<3;e++)o(t).children[e].onclick=()=>{l(e)};for(let e=0;e<4;e++)o(n).children[e].onclick=()=>{var t;t=e,console.log("Dialogue speed set to "+t),Array.from(document.getElementById(n).children).forEach((e=>{e.classList.remove("selected")})),document.getElementById(n).children[t].classList.add("selected")}}()})()})();